<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Elastic-job by dangdangdotcom</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Elastic-job</h1>
      <h2 class="project-tagline">Elastic-Job is a distributed scheduled job framework, based on Quartz and Curator.</h2>
      <a href="https://github.com/dangdangdotcom/elastic-job" class="btn">View on GitHub</a>
      <a href="https://github.com/dangdangdotcom/elastic-job/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/dangdangdotcom/elastic-job/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
<h1>User guide</h1>
<h2>
<a id="code_writing" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code writing</h2>

<p>Elastic-Job support 2 types of job model, they are Simple and DataFlow. DataFlow type use to process data flow, Its job model also support 2 types, ThroughputDataFlow and SequenceDataFlow. It needs extends related abstract classes.</p>

<p>Method parameter 'shardingContext' include job configuration, sharding and runtime info. Use getShardingTotalCount(), getShardingItems() get related info.</p>

<ul>
<li>
<p><strong>Simple job</strong></p>

<p>This class only has one abstract method need to override, for scheduled call. It usually to execute normal scheduled task, just like original interface for Quartz, but support scalability and sharing features.</p>
</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyElasticJob</span> <span class="pl-k">extends</span> <span class="pl-e">AbstractSimpleElasticJob </span> {

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">process</span>(<span class="pl-smi">JobExecutionMultipleShardingContext</span> <span class="pl-v">context</span>) {
        <span class="pl-c">// do something by sharding items</span>
    }
}</pre></div>

<ul>
<li>
<p><strong>ThroughputDataFlow job</strong></p>

<p>ThroughputDataFlow job is more difficult, need extends 'AbstractThroughputDataFlowElasticJob' and can indicated generic for return type. There are 3 methods can be override, use to fetch data, process fetched data and indicate use streaming process or not. This type of job can get statistic for process success/failure count. <strong>Pay attention please: If use streaming process, only the return value of method 'fetchData' is null or empty list, job will be recognized as completed, otherwise job will run forever. </strong></p>

<p>ThroughputDataFlow job call 'fetchData' first, and then pass data to 'processData', 'processData' use multiple thread to process data (thread pool size can configure). If use streaming process data, it is better do in method 'processData', update data status in the end, to avoid 'fetchData' fetch the data again, and will never stop the job. The return value of 'processData' means this process is succeeded or not, throws exception or return false means failure.</p>
</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyElasticJob</span> <span class="pl-k">extends</span> <span class="pl-e">AbstractThroughputDataFlowElasticJob&lt;<span class="pl-smi">Foo</span>&gt;</span> {

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">List&lt;<span class="pl-smi">Foo</span>&gt;</span> <span class="pl-en">fetchData</span>(<span class="pl-smi">JobExecutionMultipleShardingContext</span> <span class="pl-v">context</span>) {
        <span class="pl-k">List&lt;<span class="pl-smi">Foo</span>&gt;</span> result <span class="pl-k">=</span> <span class="pl-c">// get data from database by sharding items</span>
        <span class="pl-k">return</span> result;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">processData</span>(<span class="pl-smi">JobExecutionMultipleShardingContext</span> <span class="pl-v">context</span>, <span class="pl-smi">Foo</span> <span class="pl-v">data</span>) {
        <span class="pl-c">// process data</span>
        <span class="pl-k">return</span> <span class="pl-c1">true</span>;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">isStreamingProcess</span>() {
        <span class="pl-k">return</span> <span class="pl-c1">true</span>;
    }
}</pre></div>

<ul>
<li>
<p><strong>SequenceDataFlow job</strong></p>

<p>SequenceDataFlow job is very similar with ThroughputDataFlow job, the different is ThroughputDataFlow job can configure more thread to concurrent process data, but cannot guarantee sequence. Example: Take 100 data from 2 sharing items, item 1 has 40 data, item 2 has 60 data, configure 2 threads to process data. Item 1 will process first 50 data,  Item 2 will process second 50 data, here just ignore sharding items; SequenceDataFlow job depends on sharding items here, every sharding item use same thread to process, so item 1 process 40 data from item 1, item 1 process 60 data from item 2, sequence guarantee, but the max thread number just 2. So ThroughputDataFlow job's performance is better than SequenceDataFlow job, but ignores sequence. Please choose your scenario here.</p>
</li>
</ul>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyElasticJob</span> <span class="pl-k">extends</span> <span class="pl-e">AbstractSequenceDataFlowElasticJob&lt;<span class="pl-smi">Foo</span>&gt;</span> {

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">List&lt;<span class="pl-smi">Foo</span>&gt;</span> <span class="pl-en">fetchData</span>(<span class="pl-smi">JobExecutionSingleShardingContext</span> <span class="pl-v">context</span>) {
        <span class="pl-k">List&lt;<span class="pl-smi">Foo</span>&gt;</span> result <span class="pl-k">=</span> <span class="pl-c">// get data from database by sharding items</span>
        <span class="pl-k">return</span> result;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">processData</span>(<span class="pl-smi">JobExecutionSingleShardingContext</span> <span class="pl-v">context</span>, <span class="pl-smi">Foo</span> <span class="pl-v">data</span>) {
        <span class="pl-c">// process data</span>
        <span class="pl-k">return</span> <span class="pl-c1">true</span>;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">isStreamingProcess</span>() {
        <span class="pl-k">return</span> <span class="pl-c1">true</span>;
    }
}</pre></div>

<h2>
<a id="job_configuration" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Job Configuration</h2>

<p>Use with spring framework together, should configure job bean as a spring bean, and then can use dependency injection your spring bean, like data source etc., place-holder supported which can load value form properties files.</p>

<ul>
<li><strong>Spring namespace</strong></li>
</ul>

<div class="highlight highlight-text-xml"><pre>&lt;?<span class="pl-ent">xml</span><span class="pl-e"> version</span>=<span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span><span class="pl-e"> encoding</span>=<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>?&gt;
&lt;<span class="pl-ent">beans</span> <span class="pl-e">xmlns</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.springframework.org/schema/beans<span class="pl-pds">"</span></span>
    <span class="pl-e">xmlns</span><span class="pl-e">:</span><span class="pl-e">xsi</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="pl-pds">"</span></span>
    <span class="pl-e">xmlns</span><span class="pl-e">:</span><span class="pl-e">reg</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.dangdang.com/schema/ddframe/reg<span class="pl-pds">"</span></span>
    <span class="pl-e">xmlns</span><span class="pl-e">:</span><span class="pl-e">job</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.dangdang.com/schema/ddframe/job<span class="pl-pds">"</span></span>
    <span class="pl-e">xsi</span><span class="pl-e">:</span><span class="pl-e">schemaLocation</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.springframework.org/schema/beans </span>
<span class="pl-s">                        http://www.springframework.org/schema/beans/spring-beans.xsd </span>
<span class="pl-s">                        http://www.dangdang.com/schema/ddframe/reg </span>
<span class="pl-s">                        http://www.dangdang.com/schema/ddframe/reg/reg.xsd </span>
<span class="pl-s">                        http://www.dangdang.com/schema/ddframe/job </span>
<span class="pl-s">                        http://www.dangdang.com/schema/ddframe/job/job.xsd </span>
<span class="pl-s">                        <span class="pl-pds">"</span></span>&gt;
    <span class="pl-c">&lt;!--configure registry center --&gt;</span>
    &lt;<span class="pl-ent">reg</span><span class="pl-ent">:</span><span class="pl-ent">zookeeper</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>regCenter<span class="pl-pds">"</span></span> <span class="pl-e">serverLists</span>=<span class="pl-s"><span class="pl-pds">"</span> yourhost:2181<span class="pl-pds">"</span></span> <span class="pl-e">namespace</span>=<span class="pl-s"><span class="pl-pds">"</span>dd-job<span class="pl-pds">"</span></span> <span class="pl-e">baseSleepTimeMilliseconds</span>=<span class="pl-s"><span class="pl-pds">"</span>1000<span class="pl-pds">"</span></span> <span class="pl-e">maxSleepTimeMilliseconds</span>=<span class="pl-s"><span class="pl-pds">"</span>3000<span class="pl-pds">"</span></span> <span class="pl-e">maxRetries</span>=<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> /&gt;

    <span class="pl-c">&lt;!-- configure job A--&gt;</span>
    &lt;<span class="pl-ent">job</span><span class="pl-ent">:</span><span class="pl-ent">bean</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>simpleElasticJob<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>xxx.MySimpleElasticJob<span class="pl-pds">"</span></span> <span class="pl-e">regCenter</span>=<span class="pl-s"><span class="pl-pds">"</span>regCenter<span class="pl-pds">"</span></span> <span class="pl-e">cron</span>=<span class="pl-s"><span class="pl-pds">"</span>0/10 * * * * ?<span class="pl-pds">"</span></span>   <span class="pl-e">shardingTotalCount</span>=<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> <span class="pl-e">shardingItemParameters</span>=<span class="pl-s"><span class="pl-pds">"</span>0=A,1=B,2=C<span class="pl-pds">"</span></span> /&gt;

    <span class="pl-c">&lt;!-- configure job B--&gt;</span>
    &lt;<span class="pl-ent">job</span><span class="pl-ent">:</span><span class="pl-ent">bean</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>throughputDataFlow<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>xxx.MyThroughputDataFlowElasticJob<span class="pl-pds">"</span></span> <span class="pl-e">regCenter</span>=<span class="pl-s"><span class="pl-pds">"</span>regCenter<span class="pl-pds">"</span></span> <span class="pl-e">cron</span>=<span class="pl-s"><span class="pl-pds">"</span>0/10 * * * * ?<span class="pl-pds">"</span></span> <span class="pl-e">shardingTotalCount</span>=<span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> <span class="pl-e">shardingItemParameters</span>=<span class="pl-s"><span class="pl-pds">"</span>0=A,1=B,2=C<span class="pl-pds">"</span></span> <span class="pl-e">processCountIntervalSeconds</span>=<span class="pl-s"><span class="pl-pds">"</span>10<span class="pl-pds">"</span></span> <span class="pl-e">concurrentDataProcessThreadCount</span>=<span class="pl-s"><span class="pl-pds">"</span>10<span class="pl-pds">"</span></span> /&gt;
&lt;/<span class="pl-ent">beans</span>&gt;</pre></div>

<p><strong>job:bean namespace details</strong></p>

<table>
<tbody>
<tr>
<td><em>Perperty name</em></td>
<td><em>Type</em></td>
<td><em>Required</em></td>
<td><em>Default value</em></td>
<td><em>Description</em></td>
</tr>
<tr>
<td>id</td>
<td>String</td>
<td>Y</td>
<td></td>
<td>Job name</td>
</tr>
<tr>
<td>class</td>
<td>String</td>
<td>Y</td>
<td></td>
<td>Job class name, must implement interface 'ElasticJob'.</td>
</tr>
<tr>
<td>regCenter</td>
<td>String</td>
<td>Y</td>
<td></td>
<td>Registry center reference, use reg:zookeeper to define this bean.</td>
</tr>
<tr>
<td>cron</td>
<td>String</td>
<td>Y</td>
<td></td>
<td>CRON expression, use to trigger scheduled job.</td>
</tr>
<tr>
<td>shardingTotalCount</td>
<td>int</td>
<td>Y</td>
<td></td>
<td>Sharding total count.</td>
</tr>
<tr>
<td>shardingItemParameters</td>
<td>String</td>
<td>N</td>
<td></td>
<td>Map for sharing item numbers and customized parameters.<br>Key and value use equal sign to split, more pairs use comma to split.<br>Key starts from zero; maximum size is sharding total count minus one.<br>Example: <br>0=a,1=b,2=c</td>
</tr>
<tr>
<td>jobParameter</td>
<td>String</td>
<td>N</td>
<td></td>
<td>Job parameter for one job context.<br>Can configure more same job class, but different instance, use different job parameter.</td>
</tr>
<tr>
<td>monitorExecution</td>
<td>boolean</td>
<td>N</td>
<td>true</td>
<td>Monitor execution status.<br>For instantaneous job (like fire per 5 seconds), recommend disable monitor execution to improve performance. Because of instantaneous job don't need know status exactly, the status you see maybe changed soon. Developer can monitor data accumulate. Disabled this cannot guarantee duplicate data fetch, please check duplicate data by yourself. <br>For long time job, enable this is an good idea.
</td>
</tr>
<tr>
<td>monitorPort</td>
<td>int</td>
<td>Âê¶</td>
<td>-1</td>
<td>Monitor port.<br>Dump job running informations.<br>Example:echo "dump" | nc 127.0.0.1 9001
</td>
</tr>
<tr>
<td>processCountIntervalSeconds</td>
<td>int</td>
<td>N</td>
<td>300</td>
<td>Job process count statistics interval seconds.<br>Unit: second<br>For DataFlow job only.</td>
</tr>
<tr>
<td>concurrentDataProcessThreadCount</td>
<td>int</td>
<td>N</td>
<td>1</td>
<td>Max threads number for data concurrent process.<br>Cannot less than one.<br>For ThroughputDataFlow job only.</td>
</tr>
<tr>
<td>fetchDataCount</td>
<td>int</td>
<td>N</td>
<td>0</td>
<td>Data fetch count for per fetch process.</td>
</tr>
<tr>
<td>maxTimeDiffSeconds</td>
<td>int</td>
<td>N</td>
<td>-1</td>
<td>Max seconds of time diff between job servers and register center.<br>If exceed will throw an exception and disable job start.<br>Set -1 means never verify time diff.</td>
</tr>
<tr>
<td>failover</td>
<td>boolean</td>
<td>N</td>
<td>false</td>
<td>Enable/disable failover.<br>Effected only for enable monitorExecution.</td>
</tr>
<tr>
<td>misfire</td>
<td>boolean</td>
<td>N</td>
<td>true</td>
<td>Enable/disable misfire.</td>
</tr>
<tr>
<td>jobShardingStrategyClass</td>
<td>String</td>
<td>N</td>
<td></td>
<td>Job sharding strategy class name<br>Use average allocation strategy by default<br>Details: <a href="http://dangdangdotcom.github.io/elastic-job/jobStrategy_en.html">Job sharding strategy</a></td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>N</td>
<td></td>
<td>Description for job.</td>
</tr>
<tr>
<td>disabled</td>
<td>boolean</td>
<td>N</td>
<td>false</td>
<td>Enable/disable job<br>Usually disable during publish jobs for multiple servers.</td>
</tr>
<tr>
<td>overwrite</td>
<td>boolean</td>
<td>N</td>
<td>false</td>
<td>Local configuration can/cannot overwrite registry center's configuration.</td>
</tr>
</tbody>
</table>

<p><strong>reg:zookeeper namespace details</strong></p>

<table>
<tbody>
<tr>
<td><em>Perperty name</em></td>
<td><em>Type</em></td>
<td><em>Required</em></td>
<td><em>Default value</em></td>
<td><em>Description</em></td>
</tr>
<tr>
<td>id</td>
<td>String</td>
<td>Y</td>
<td></td>
<td>Primary key for spring.</td>
</tr>
<tr>
<td>serverLists</td>
<td>String</td>
<td>Y</td>
<td></td>
<td>Server lists for Zookeeper.<br>Include IP address and port.<br>Multiple port use comma to split.<br>Example: host1:2181,host2:2181</td>
</tr>
<tr>
<td>namespace</td>
<td>String</td>
<td>Y</td>
<td></td>
<td>Namespace of Zookeeper</td>
</tr>
<tr>
<td>baseSleepTimeMilliseconds</td>
<td>int</td>
<td>Y</td>
<td></td>
<td>Initial milliseconds for waiting to next retry.<br>Unit: milliseconds</td>
</tr>
<tr>
<td>maxSleepTimeMilliseconds</td>
<td>int</td>
<td>Y</td>
<td></td>
<td>Maximum milliseconds for waiting to next retry.<br>Unit: milliseconds</td>
</tr>
<tr>
<td>maxRetries</td>
<td>int</td>
<td>Y</td>
<td></td>
<td>Maximum retry times.</td>
</tr>
<tr>
<td>sessionTimeoutMilliseconds</td>
<td>int</td>
<td>N</td>
<td>60000</td>
<td>Zookeeper session time out milliseconds.<br>Unit: milliseconds</td>
</tr>
<tr>
<td>connectionTimeoutMilliseconds</td>
<td>int</td>
<td>N</td>
<td>15000</td>
<td>Zookeeper connection time out milliseconds.<br>Unit: milliseconds</td>
</tr>
<tr>
<td>digest</td>
<td>String</td>
<td>N</td>
<td>None</td>
<td>Digest for Zookeeper.</td>
</tr>
</tbody>
</table>

<ul>
<li><strong>Use Spring but not use namespace</strong></li>
</ul>

<div class="highlight highlight-text-xml"><pre>    <span class="pl-c">&lt;!-- configure registry center --&gt;</span>
    &lt;<span class="pl-ent">bean</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>regCenter<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>com.dangdang.ddframe.reg.zookeeper.ZookeeperRegistryCenter<span class="pl-pds">"</span></span> <span class="pl-e">init-method</span>=<span class="pl-s"><span class="pl-pds">"</span>init<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">constructor-arg</span>&gt;
            &lt;<span class="pl-ent">bean</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>com.dangdang.ddframe.reg.zookeeper.ZookeeperConfiguration<span class="pl-pds">"</span></span>&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>serverLists<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>namespace<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>baseSleepTimeMilliseconds<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>maxSleepTimeMilliseconds<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>maxRetries<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
            &lt;/<span class="pl-ent">bean</span>&gt;
        &lt;/<span class="pl-ent">constructor-arg</span>&gt;
    &lt;/<span class="pl-ent">bean</span>&gt;
    <span class="pl-c">&lt;!-- configure job--&gt;</span>
    &lt;<span class="pl-ent">bean</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>xxxJob<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>com.dangdang.ddframe.job.spring.schedule.SpringJobScheduler<span class="pl-pds">"</span></span> <span class="pl-e">init-method</span>=<span class="pl-s"><span class="pl-pds">"</span>init<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">constructor-arg</span> <span class="pl-e">ref</span>=<span class="pl-s"><span class="pl-pds">"</span>regCenter<span class="pl-pds">"</span></span> /&gt;
        &lt;<span class="pl-ent">constructor-arg</span>&gt;
            &lt;<span class="pl-ent">bean</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>com.dangdang.ddframe.job.api.JobConfiguration<span class="pl-pds">"</span></span>&gt;
                &lt;<span class="pl-ent">constructor-arg</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>jobName<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>xxxJob<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">constructor-arg</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>jobClass<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>xxxDemoJob<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">constructor-arg</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>shardingTotalCount<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>10<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">constructor-arg</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>cron<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>0/10 * * * * ?<span class="pl-pds">"</span></span> /&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>shardingItemParameters<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${xxx}<span class="pl-pds">"</span></span> /&gt;
            &lt;/<span class="pl-ent">bean</span>&gt;
        &lt;/<span class="pl-ent">constructor-arg</span>&gt;
    &lt;/<span class="pl-ent">bean</span>&gt;</pre></div>

<ul>
<li><strong>Do not use Spring</strong></li>
</ul>

<p>If you don't want use spring framework, can use pure java code to start elastic-job.</p>

<pre class="rich-diff-level-zero"><span class="pl-k rich-diff-level-one">import</span> <span class="pl-smi rich-diff-level-one">com.dangdang.ddframe.job.api.JobConfiguration</span>;
<span class="pl-k rich-diff-level-one">import</span> <span class="pl-smi rich-diff-level-one">com.dangdang.ddframe.job.api.JobScheduler</span>;
<span class="pl-k rich-diff-level-one">import</span> <span class="pl-smi rich-diff-level-one">com.dangdang.ddframe.reg.base.CoordinatorRegistryCenter</span>;
<span class="pl-k rich-diff-level-one">import</span> <span class="pl-smi rich-diff-level-one">com.dangdang.ddframe.reg.zookeeper.ZookeeperConfiguration</span>;
<span class="pl-k rich-diff-level-one">import</span> <span class="pl-smi rich-diff-level-one">com.dangdang.ddframe.reg.zookeeper.ZookeeperRegistryCenter</span>;
<span class="pl-k rich-diff-level-one">import</span> <span class="pl-smi rich-diff-level-one">com.dangdang.example.elasticjob.core.job.SimpleJobDemo</span>;
<span class="pl-k rich-diff-level-one">import</span> <span class="pl-smi rich-diff-level-one">com.dangdang.example.elasticjob.core.job.ThroughputDataFlowJobDemo</span>;
<span class="pl-k rich-diff-level-one">import</span> <span class="pl-smi rich-diff-level-one">com.dangdang.example.elasticjob.core.job.SequenceDataFlowJobDemo</span>;

<span class="pl-k rich-diff-level-one">public</span> <span class="pl-k rich-diff-level-one">class</span> <span class="pl-en rich-diff-level-one">JobDemo</span> {

    <span class="pl-c rich-diff-level-one">// Define Zookeeper registry center configuration object</span>
    <span class="pl-k rich-diff-level-one">private</span> <span class="pl-smi rich-diff-level-one">ZookeeperConfiguration</span> zkConfig <span class="pl-k rich-diff-level-one">=</span> <span class="pl-k rich-diff-level-one">new</span> <span class="pl-smi rich-diff-level-one">ZookeeperConfiguration</span>(<span class="pl-s rich-diff-level-one"><span class="pl-pds">"</span>localhost:2181<span class="pl-pds">"</span></span>, <span class="pl-s rich-diff-level-one"><span class="pl-pds">"</span>elastic-job-example<span class="pl-pds">"</span></span>, <span class="pl-c1 rich-diff-level-one">1000</span>, <span class="pl-c1 rich-diff-level-one">3000</span>, <span class="pl-c1 rich-diff-level-one">3</span>);

    <span class="pl-c rich-diff-level-one">// Define Zookeeper registry center</span>
    <span class="pl-k rich-diff-level-one">private</span> <span class="pl-smi rich-diff-level-one">CoordinatorRegistryCenter</span> regCenter <span class="pl-k rich-diff-level-one">=</span> <span class="pl-k rich-diff-level-one">new</span> <span class="pl-smi rich-diff-level-one">ZookeeperRegistryCenter</span>(zkConfig);

    <span class="pl-c rich-diff-level-one">// Define Job 1 configuration object</span>
    <span class="pl-k rich-diff-level-one">private</span> <span class="pl-smi rich-diff-level-one">JobConfiguration</span> jobConfig1 <span class="pl-k rich-diff-level-one">=</span> <span class="pl-k rich-diff-level-one">new</span> <span class="pl-smi rich-diff-level-one">JobConfiguration</span>(<span class="pl-s rich-diff-level-one"><span class="pl-pds">"</span>simpleJob<span class="pl-pds">"</span></span>, <span class="pl-smi rich-diff-level-one">SimpleJobDemo</span><span class="pl-k rich-diff-level-one">.</span>class, <span class="pl-c1 rich-diff-level-one">10</span>, <span class="pl-s rich-diff-level-one"><span class="pl-pds">"</span>0/5 * * * * ?<span class="pl-pds">"</span></span>);

    <span class="pl-c rich-diff-level-one">// Define Job 2 configuration object</span>
    <span class="pl-k rich-diff-level-one">private</span> <span class="pl-smi rich-diff-level-one">JobConfiguration</span> jobConfig2 <span class="pl-k rich-diff-level-one">=</span> <span class="pl-k rich-diff-level-one">new</span> <span class="pl-smi rich-diff-level-one">JobConfiguration</span>(<span class="pl-s rich-diff-level-one"><span class="pl-pds">"</span>throughputDataFlowJob<span class="pl-pds">"</span></span>, <span class="pl-smi rich-diff-level-one">ThroughputDataFlowJobDemo</span><span class="pl-k rich-diff-level-one">.</span>class, <span class="pl-c1 rich-diff-level-one">10</span>, <span class="pl-s rich-diff-level-one"><span class="pl-pds">"</span>0/5 * * * * ?<span class="pl-pds">"</span></span>);

    <span class="pl-c rich-diff-level-one">// Define Job 3 configuration object</span>
    <span class="pl-k rich-diff-level-one">private</span> <span class="pl-smi rich-diff-level-one">JobConfiguration</span> jobConfig3 <span class="pl-k rich-diff-level-one">=</span> <span class="pl-k rich-diff-level-one">new</span> <span class="pl-smi rich-diff-level-one">JobConfiguration</span>(<span class="pl-s rich-diff-level-one"><span class="pl-pds">"</span>sequenceDataFlowJob<span class="pl-pds">"</span></span>, <span class="pl-smi rich-diff-level-one">SequenceDataFlowJobDemo</span><span class="pl-k rich-diff-level-one">.</span>class, <span class="pl-c1 rich-diff-level-one">10</span>, <span class="pl-s rich-diff-level-one"><span class="pl-pds">"</span>0/5 * * * * ?<span class="pl-pds">"</span></span>);

    <span class="pl-k rich-diff-level-one">public</span> <span class="pl-k rich-diff-level-one">static</span> <span class="pl-k rich-diff-level-one">void</span> <span class="pl-en rich-diff-level-one">main</span>(<span class="pl-k rich-diff-level-one">final</span> <span class="pl-k rich-diff-level-one">String</span>[] <span class="pl-v rich-diff-level-one">args</span>) {
        <span class="pl-k rich-diff-level-one">new</span> <span class="pl-smi rich-diff-level-one">JobDemo</span>()<span class="pl-k rich-diff-level-one">.</span>init();
    }

    <span class="pl-k rich-diff-level-one">private</span> <span class="pl-k rich-diff-level-one">void</span> <span class="pl-en rich-diff-level-one">init</span>() {
        <span class="pl-c rich-diff-level-one">// Connect registry center</span>
        regCenter<span class="pl-k rich-diff-level-one">.</span>init();
        <span class="pl-c rich-diff-level-one">// Start job 1</span>
        <span class="pl-k rich-diff-level-one">new</span> <span class="pl-smi rich-diff-level-one">JobScheduler</span>(regCenter, jobConfig1)<span class="pl-k rich-diff-level-one">.</span>init();
        <span class="pl-c rich-diff-level-one">// Start job 2</span>
        <span class="pl-k rich-diff-level-one">new</span> <span class="pl-smi rich-diff-level-one">JobScheduler</span>(regCenter, jobConfig2)<span class="pl-k rich-diff-level-one">.</span>init();
        <span class="pl-c rich-diff-level-one">// Start job 3</span>
        <span class="pl-k rich-diff-level-one">new</span> <span class="pl-smi rich-diff-level-one">JobScheduler</span>(regCenter, jobConfig3)<span class="pl-k rich-diff-level-one">.</span>init();
    }
}</pre></div>
      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/dangdangdotcom/elastic-job">Elastic-job</a> is maintained by <a href="https://github.com/dangdangdotcom">dangdangdotcom</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("elastic-job");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
